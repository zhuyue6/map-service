import{V as p,b as w,d as b,g as D}from"./index.p3HzktB-.js";import{D as L,c as F}from"./Draw.DLF4MqmK.js";var u=(t=>(t.line="LineString",t.circle="Circle",t.polygon="Polygon",t.rect="Circle",t))(u||{});const I={rect:F()};function x(t,S){let e=t.getInteractiveByType("draw");if(e)return e;const r=t.getOlMap(),d=t.getEmitter(),c=new p,s=new w({source:c});let o,n="line";const m=void 0;function i(a,l){o=new L({source:c,type:u[a],geometryFunction:l}),o.on("drawend",y=>{const f=y.feature.getGeometry(),g=D(f);c.clear(),d.emit("draw",{type:a,data:g})})}return i(n,m),e={id:b(),type:"draw",enabled:!1,use(a){n=a,r.removeInteraction(o);const l=I[n];i(n,l),e.enabled&&r.addInteraction(o),d.emit("use")},enable(){e.enabled||(r.addLayer(s),r.addInteraction(o),e.enabled=!0)},close(){e.enabled&&(r.removeLayer(s),r.removeInteraction(o),e.enabled=!1)},destroy(){e.close(),s.dispose(),o.dispose()}},t.add(e),e}export{x as c};
