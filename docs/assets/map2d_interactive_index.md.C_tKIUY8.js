import{I as A,y as D,E as x,p as w,x as I,C as T}from"./chunks/index.DCeaUPRn.js";import{d as M,ah as V,p as $,v as q,C as u,c as P,o as N,a_ as R,j as n,G as t,w as l,a as E,t as c}from"./chunks/framework.DHivC7wf.js";const S={class:"w-[500px] h-[700px]"},O={class:"flex w-full flex-col"},j={class:"flex mb-2 items-center"},z={class:"flex mb-2"},G={class:"flex mb-2"},J={class:"flex mb-2"},H={class:"flex mb-2"},W=JSON.parse('{"title":"交互管理器","description":"","frontmatter":{},"headers":[],"relativePath":"map2d/interactive/index.md","filePath":"map2d/interactive/index.md"}'),K={name:"map2d/interactive/index.md"},X=M({...K,setup(L){const s=V({draw:!1,drawType:"circle",select:!1,move:!1,modify:!1,measure:!1,measureType:"distance"}),C=$();let k,h,[g,m,p,d,y]=[];function v(i){s.drawType=i,g.use(i)}function b(i){s.measureType=i,y.use(i)}function r(i,a){if(a){B(i);return}_(i)}function B(i){switch(i){case"draw":g.enable();break;case"select":m.enable();break;case"move":p.enable();break;case"modify":d.enable();break;case"measure":y.enable();break}s[i]=!0}function _(i){switch(i){case"draw":g.close();break;case"select":m.close();break;case"move":p.close();break;case"modify":d.close();break;case"measure":y.close();break}s[i]=!1}return q(()=>{k=A({el:C.value});const i=k.container.layerManager.create();h=k.interactiveManager,g=D(h),m=x(h),p=w(h),d=I(h),y=T(h),i.create({type:"image",style:{stroke:{color:"red"}},rotate:30,image:{src:"https://raw.githubusercontent.com/zhuyue6/web-map-service/main/public/images/position.png"},data:[6e3,6e3]}),k.emitter.on("select",a=>{p.clean(),d.clean();for(const e of a)p.add(e),d.add(e)}),v(s.drawType),b(s.measureType),k.emitter.on("draw",a=>{i.create(a)})}),(i,a)=>{const e=u("el-option"),f=u("el-select"),o=u("el-button");return N(),P("div",null,[a[5]||(a[5]=R(`<h1 id="交互管理器" tabindex="-1">交互管理器 <a class="header-anchor" href="#交互管理器" aria-label="Permalink to &quot;交互管理器&quot;">​</a></h1><p>对交互进行管理操作</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InteractiveManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">interactive</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InteractiveItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">interactive</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InteractiveItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    clean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    getOlMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OlMap</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    getContainer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Container</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    getEmitter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> emitter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Emitter</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    getInteractiveItems</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InteractiveItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">interactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> map</span></span></code></pre></div><p><strong>InteractiveManager事件</strong></p><table tabindex="0"><thead><tr><th>事件</th><th>参数</th><th>是否必填</th><th>描述</th></tr></thead><tbody><tr><td>add</td><td>InteractiveItem</td><td>是</td><td>添加交互项</td></tr><tr><td>close</td><td>InteractiveItem</td><td>是</td><td>删除交互项</td></tr><tr><td>clean</td><td>undefined</td><td>否</td><td>清空交互项</td></tr><tr><td>getOlMap</td><td>undefined</td><td>否</td><td>删除交互项</td></tr><tr><td>getContainer</td><td>undefined</td><td>否</td><td>清空交互项</td></tr><tr><td>getEmitter</td><td>undefined</td><td>否</td><td>删除交互项</td></tr><tr><td>getInteractiveItems</td><td>undefined</td><td>否</td><td>获取当前所有的交互项</td></tr></tbody></table><h2 id="交互" tabindex="-1">交互 <a class="header-anchor" href="#交互" aria-label="Permalink to &quot;交互&quot;">​</a></h2><p>交互由交互基本信息和交互事件组成，通常交互事件会通过emitter对外抛出相应的回调函数，交互项的通用事件是enable/close代表启用和停用。<br> 有一些交互项还会有其他的交互事件</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InteractiveEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">T</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">unknown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    enabled</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    enable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    destroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> T</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Interactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">T</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">unknown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">unknown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InteractiveEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p><strong>Interactive通用事件</strong></p><table tabindex="0"><thead><tr><th>事件</th><th>参数</th><th>是否必填</th><th>描述</th></tr></thead><tbody><tr><td>enable</td><td>undefined</td><td>是</td><td>启用交互</td></tr><tr><td>close</td><td>undefined</td><td>是</td><td>关闭交互</td></tr><tr><td>destroy</td><td>undefined</td><td>是</td><td>销毁交互</td></tr></tbody></table><h2 id="已有的交互插件" tabindex="-1">已有的交互插件 <a class="header-anchor" href="#已有的交互插件" aria-label="Permalink to &quot;已有的交互插件&quot;">​</a></h2><p>目前有绘制、测距、修改、移动、选择交互 每一个交互项目都是通过enable 启用, close 关闭，基本有一些特殊的交互事件</p><h2 id="演示" tabindex="-1">演示 <a class="header-anchor" href="#演示" aria-label="Permalink to &quot;演示&quot;">​</a></h2>`,13)),n("div",S,[n("div",O,[n("div",j,[t(f,{modelValue:s.drawType,onChange:v},{default:l(()=>[t(e,{value:"circle",label:"绘制圆形"}),t(e,{value:"polygon",label:"绘制多边形"}),t(e,{value:"line",label:"绘制线段"})]),_:1},8,["modelValue"]),t(o,{class:"ml-2",onClick:a[0]||(a[0]=F=>r("draw",!s.draw)),type:"primary"},{default:l(()=>[E(c(`${s.draw?"关闭":"启用"} draw交互项`),1)]),_:1})]),n("div",z,[t(o,{class:"mr-2",onClick:a[1]||(a[1]=F=>r("select",!s.select)),type:"primary"},{default:l(()=>[E(c(`${s.select?"关闭":"启用"} select交互项`),1)]),_:1})]),n("div",G,[t(o,{class:"mr-2",onClick:a[2]||(a[2]=F=>r("modify",!s.modify)),type:"primary"},{default:l(()=>[E(c(`${s.modify?"关闭":"启用"} modify交互项`),1)]),_:1})]),n("div",J,[t(o,{class:"mr-2",onClick:a[3]||(a[3]=F=>r("move",!s.move)),type:"primary"},{default:l(()=>[E(c(`${s.move?"关闭":"启用"} move交互项`),1)]),_:1})]),n("div",H,[t(f,{modelValue:s.measureType,onChange:b},{default:l(()=>[t(e,{value:"distance",label:"测距"}),t(e,{value:"area",label:"测面积"})]),_:1},8,["modelValue"]),t(o,{class:"ml-2 mr-2",onClick:a[4]||(a[4]=F=>r("measure",!s.measure)),type:"primary"},{default:l(()=>[E(c(`${s.measure?"关闭":"启用"} measure交互项`),1)]),_:1})])]),n("div",{class:"w-[500px] h-[500px] border",ref_key:"mapRef",ref:C},null,512)])])}}});export{W as __pageData,X as default};
